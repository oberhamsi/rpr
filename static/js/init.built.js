/**
 * @license RequireJS domReady 1.0.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
define("lib/domReady",[],function(){function i(a){for(var b=0,d;d=a[b];b++)d(c)}function j(){var a=d,c=e;b&&(a.length&&(d=[],i(a)),f.resourcesDone&&c.length&&(e=[],i(c)))}function k(){b||(b=!0,h&&clearInterval(h),j())}function l(a){return b?a(c):d.push(a),l}var a=typeof window!="undefined"&&window.document,b=!a,c=a?document:null,d=[],e=[],f=requirejs||require||{},g=f.resourcesReady,h;return"resourcesReady"in f&&(f.resourcesReady=function(a){g&&g(a),a&&j()}),a&&(document.addEventListener?(document.addEventListener("DOMContentLoaded",k,!1),window.addEventListener("load",k,!1)):window.attachEvent&&(window.attachEvent("onload",k),self===self.top&&(h=setInterval(function(){try{document.body&&(document.documentElement.doScroll("left"),k())}catch(a){}},30))),document.readyState==="complete"&&k()),l.withResources=function(a){return b&&f.resourcesDone?a(c):e.push(a),l},l.version="1.0.0",l.load=function(a,b,c,d){d.isBuild?c(null):l(c)},l}),define("lib/hogan",["require","exports","module"],function(a,b,c){var d={};(function(a){function h(a){return a=String(a===null||a===undefined?"":a),g.test(a)?a.replace(b,"&amp;").replace(c,"&lt;").replace(d,"&gt;").replace(e,"&#39;").replace(f,"&quot;"):a}a.Template=function j(a,b,c){a&&(this.r=a),this.c=c,this.text=b||""},a.Template.prototype={r:function(a,b,c){return""},v:h,render:function(b,c,d){return this.ri([b],c||{},d)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&typeof e=="string"&&(e=this.c.compile(e)),e.ri(b,c,d)):""},rs:function(a,b,c){var d="",e=a[a.length-1];if(!i(e))return d=c(a,b);for(var f=0;f<e.length;f++)a.push(e[f]),d+=c(a,b),a.pop();return d},s:function(a,b,c,d,e,f,g){var h;return i(a)&&a.length===0?!1:(typeof a=="function"&&(a=this.ls(a,b,c,d,e,f,g)),h=a===""||!!a,!d&&h&&b&&b.push(typeof a=="object"?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if(a==="."&&i(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&typeof f=="object"&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(!d&&typeof f=="function"&&(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){var e=!1,f=null,g=!1;for(var h=b.length-1;h>=0;h--){f=b[h];if(f&&typeof f=="object"&&a in f){e=f[a],g=!0;break}}return g?(!d&&typeof e=="function"&&(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=a.call(b,d,function(a){return f.compile(a,{delimiters:e}).render(b,c)}),h=f.compile(g.toString(),{delimiters:e}).render(b,c);return this.b=h,!1},b:"",ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);i=a.call(h);if(typeof i=="function"){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,c){var d=b[b.length-1],e=a.call(d);return typeof e=="function"&&(e=e.call(d)),e=e.toString(),this.c&&~e.indexOf("{{")?this.c.compile(e).render(d,c):e}};var b=/&/g,c=/</g,d=/>/g,e=/\'/g,f=/\"/g,g=/[&<>\"\']/,i=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}})(typeof b!="undefined"?b:d),function(a){function h(a){a.n.substr(a.n.length-1)==="}"&&(a.n=a.n.substring(0,a.n.length-1))}function i(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function j(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function k(a,b,c,d){var e=[],f=null,g=null;while(a.length>0){g=a.shift();if(g.tag=="#"||g.tag=="^"||l(g,d))c.push(g),g.nodes=k(a,g.tag,c,d),e.push(g);else{if(g.tag=="/"){if(c.length===0)throw new Error("Closing tag without opener: /"+g.n);f=c.pop();if(g.n!=f.n&&!m(g.n,f.n,d))throw new Error("Nesting error: "+f.n+" vs. "+g.n);return f.end=g.i,e}e.push(g)}}if(c.length>0)throw new Error("missing closing tag: "+c.pop().n);return e}function l(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].o==a.n)return a.tag="#",!0}function m(a,b,c){for(var d=0,e=c.length;d<e;d++)if(c[d].c==a&&c[d].o==b)return!0}function n(a){return'i = i || "";var b = i + "";var _ = this;'+q(a)+"return b;"}function o(a){return a.replace(f,"\\\\").replace(c,'\\"').replace(d,"\\n").replace(e,"\\r")}function p(a){return~a.indexOf(".")?"d":"f"}function q(a){var b="";for(var c=0,d=a.length;c<d;c++){var e=a[c].tag;e=="#"?b+=r(a[c].nodes,a[c].n,p(a[c].n),a[c].i,a[c].end,a[c].otag+" "+a[c].ctag):e=="^"?b+=s(a[c].nodes,a[c].n,p(a[c].n)):e=="<"||e==">"?b+=t(a[c]):e=="{"||e=="&"?b+=u(a[c].n,p(a[c].n)):e=="\n"?b+=w('"\\n"'+(a.length-1==c?"":" + i")):e=="_v"?b+=v(a[c].n,p(a[c].n)):e===undefined&&(b+=w('"'+o(a[c])+'"'))}return b}function r(a,b,c,d,e,f){return"if(_.s(_."+c+'("'+o(b)+'",c,p,1),'+"c,p,0,"+d+","+e+', "'+f+'")){'+"b += _.rs(c,p,"+'function(c,p){ var b = "";'+q(a)+"return b;});c.pop();}"+'else{b += _.b; _.b = ""};'}function s(a,b,c){return"if (!_.s(_."+c+'("'+o(b)+'",c,p,1),c,p,1,0,0,"")){'+q(a)+"};"}function t(a){return'b += _.rp("'+o(a.n)+'",c,p,"'+(a.indent||"")+'");'}function u(a,b){return"b += (_."+b+'("'+o(a)+'",c,p,0));'}function v(a,b){return"b += (_.v(_."+b+'("'+o(a)+'",c,p,0)));'}function w(a){return"b += "+a+";"}var b=/\S/,c=/\"/g,d=/\n/g,e=/\r/g,f=/\\/g,g={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(c,d){function w(){p.length>0&&(q.push(new String(p)),p="")}function x(){var a=!0;for(var c=t;c<q.length;c++){a=q[c].tag&&g[q[c].tag]<g._v||!q[c].tag&&q[c].match(b)===null;if(!a)return!1}return a}function y(a,b){w();if(a&&x())for(var c=t,d;c<q.length;c++)q[c].tag||((d=q[c+1])&&d.tag==">"&&(d.indent=q[c].toString()),q.splice(c,1));else b||q.push({tag:"\n"});r=!1,t=q.length}function z(a,b){var c="="+v,d=a.indexOf(c,b),e=i(a.substring(a.indexOf("=",b)+1,d)).split(" ");return u=e[0],v=e[1],d+c.length-1}var e=c.length,f=0,k=1,l=2,m=f,n=null,o=null,p="",q=[],r=!1,s=0,t=0,u="{{",v="}}";d&&(d=d.split(" "),u=d[0],v=d[1]);for(s=0;s<e;s++)m==f?j(u,c,s)?(--s,w(),m=k):c.charAt(s)=="\n"?y(r):p+=c.charAt(s):m==k?(s+=u.length-1,o=g[c.charAt(s+1)],n=o?c.charAt(s+1):"_v",n=="="?(s=z(c,s),m=f):(o&&s++,m=l),r=s):j(v,c,s)?(q.push({tag:n,n:i(p),otag:u,ctag:v,i:n=="/"?r-v.length:s+u.length}),p="",s+=v.length-1,m=f,n=="{"&&(v=="}}"?s++:h(q[q.length-1]))):p+=c.charAt(s);return y(r,!0),q},a.generate=function(b,c,d){return d.asString?"function(c,p,i){"+b+";}":new a.Template(new Function("c","p","i",b),c,a)},a.parse=function(a,b){return b=b||{},k(a,"",[],b.sectionTags||[])},a.cache={},a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];return d?d:(d=this.generate(n(this.parse(this.scan(a,b.delimiters),b)),a,b),this.cache[c]=d)}}(typeof b!="undefined"?b:d)}),define("lib/utils/strings",["require","exports","module"],function(a,b,c){b.pad=function(a,b,c,d){if(b==null||c==null)return a;var e=c-a.length;if(e==0)return a;var f,g=0;d==null||d>0?g=e:d<0?f=e:d==0&&(g=Math.round(e/2),f=e-g);var h=[];for(var i=0;i<f;i++)h[i]=b;h.push(a);for(i=0;i<g;i++)h.push(b);return h.join("")},b.truncate=function(a,b,c){return a.length<=b?a:a.substring(0,b)+(c||"...")}}),define("lib/utils/dates",["require","exports","module","./strings"],function(a,b,c){var d=a("./strings"),e={"long":["January","February","March","April","May","June","July","August","September","October","November","December"],"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},f={"long":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},g=function(a,b,c){switch(b){case"G":return a.getFullYear()<0?"BC":"AD";case"y":return c==2?String(a.getFullYear()).substring(2):a.getFullYear();case"M":return c<3?d.pad(String(a.getMonth()+1),"0",c,-1):c==3?e["short"][a.getMonth()]:e["long"][a.getMonth()];case"w":return d.pad(a.getWeekOfYear(),"0",c,-1);case"W":var g=new Date(a.getTime());g.setDate(1);var h=g.getDay()-1,i=a.getDate()+h-1;return Math.floor(i/7)+1;case"D":return d.pad(String(a.getDayOfYear()),"0",c,-1);case"d":return d.pad(String(a.getDate()),"0",c,-1);case"F":return d.pad(String(a.getDay()),"0",c,-1);case"E":return f[c>=4?"long":"short"][a.getDay()];case"a":return a.getHours()<12?"AM":"PM";case"H":return d.pad(String(a.getHours()),"0",c,-1);case"k":return d.pad(String(1+a.getHours()),"0",c,-1);case"K":var j=a.getHours();return j>12&&(j-=12),d.pad(String(j),"0",c,-1);case"h":var j=a.getHours();return j>12&&(j-=12),d.pad(String(j+1),"0",c,-1);case"m":return d.pad(String(a.getMinutes()),"0",c,-1);case"s":return d.pad(String(a.getSeconds()),"0",c,-1);case"S":return d.pad(String(a.getMilliseconds()),"0",c,-1);case"z":var k=-a.getTimezoneOffset();return"GMT"+(k>0?"+":"-")+String(Math.abs(k/60)).padLeft("0",2)+":"+d.pad(String(k-Math.floor(k/60)*60),"0",2,-1);case"Z":var k=-a.getTimezoneOffset();return(k>0?"+":"-")+k;default:var l=[],m=0;while(m++<c)l.push(b);return l.join("")}return};b.format=function(a,b){if(a==undefined)return"";if(a.constructor!==Date){var c=parseInt(a,10);if(isNaN(c)==1)return"";a=new Date(c)}var d=[],e=0,f=!1,h,i,j;while(e<b.length){h=b.charAt(e++);if(/['"]/.test(h)){f=!f;continue}if(f==1)d.push(h);else{j=1;while(e<b.length&&b.charAt(e)==h)j+=1,e+=1;d.push(g(a,h,j))}}return d.join("")},b.parse=function(a){var b=[1,4,5,6,7,10,11],c,d=0;if(c=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(a)){for(var e=0,f;f=b[e];++e)c[f]=+c[f]||0;return c[2]=(+c[2]||1)-1,c[3]=+c[3]||1,c[8]!=="Z"&&c[9]!==undefined&&(d=c[10]*60+c[11],c[9]==="+"&&(d=0-d)),Date.UTC(c[1],c[2],c[3],c[4],c[5]+d,c[6],c[7])}return Date.parse(a)}}),define("lib/utils/numbers",["require","exports","module"],function(a,b,c){var d=["bytes","kB","MB","GB","TB"];b.formatFileSize=function(a){if(a>0){var b=Math.floor(Math.log(a)/Math.log(1024));return[(a/Math.pow(1024,b)).toFixed(1),d[b]].join(" ")}return[a,d[0]].join(" ")}}),define("views/view.package",["require","exports","module","lib/hogan","lib/utils/dates","lib/utils/numbers"],function(a,b,c){var d=a("lib/hogan"),e=a("lib/utils/dates"),f=a("lib/utils/numbers"),g=function(a){return a?_.map(_.keys(a),function(b){return{name:b,version:a[b]}}):a},h={formatDate:function(){return function(a,b){return e.format(e.parse(b(a)),"dd.MM.yyyy HH:mm")}},formatFileSize:function(){return function(a,b){return f.formatFileSize(b(a))}}},i=b.PackageView=Backbone.View.extend({tagName:"li",events:{"click .menu li":"toggle","click .checksums":"toggleChecksums",click:"toggleTabs"},initialize:function(){this.model.bind("change",this.render,this),this.template=d.compile(document.getElementById("tmpl-package").innerHTML)}});i.prototype.render=function(){var a=_.extend(this.model.toJSON(),h);return a.dependencies=g(a.dependencies),a.engines=g(a.engines),_.each(a.versions,function(a){a.dependencies=g(a.dependencies),a.engines=g(a.engines)}),a.engines!=null&&(a.ringoVersion=a.engines.ringojs),$(this.el).append(this.template.render(a)),this},i.prototype.toggleTabs=function(a){if($(a.target).is("a"))return!0;var b=$(".menu li.expanded",this.el);return b.length>0?b.trigger("click"):$(".menu li:first",this.el).trigger("click"),!1},i.prototype.toggleChecksums=function(a){var b=$(a.target).toggleClass("expanded");return b.next("dd.checksums").fadeToggle(),!1},i.prototype.toggle=function(a){var b=$(a.target);b.toggleClass("expanded").siblings().removeClass("expanded"),$(this.el).toggleClass("selected",b.hasClass("expanded"));var c=b.parent().nextAll("dl").removeClass("expanded");return b.hasClass("expanded")&&c.filter(b.data("display")).addClass("expanded"),!1}}),define("models/model.version",["require","exports","module"],function(a,b,c){var d=b.Version=Backbone.Model.extend({})}),define("collections/collection.versions",["require","exports","module","models/model.version"],function(a,b,c){var d=a("models/model.version").Version,e=b.Versions=Backbone.Collection.extend({model:d})}),define("models/model.package",["require","exports","module","collections/collection.versions"],function(a,b,c){var d=a("collections/collection.versions").Versions,e=b.Package=Backbone.MappedModel.extend({mapping:{versions:d}})}),define("views/view.list",["require","exports","module","views/view.package","models/model.package"],function(a,b,c){var d=a("views/view.package").PackageView,e=a("models/model.package").Package,f=b.ListView=Backbone.View.extend({el:"#list",$result:$("#result",this.el),$loadmore:$("#loadmore",this.el).hide(),events:{"click #loadmore":"loadMore"},initialize:function(){this.collection.bind("reset",this.clearList,this),this.collection.bind("fetched",this.onLoaded,this)}});f.prototype.clearList=function(){this.$result.empty()},f.prototype.onLoaded=function(){this.$loadmore.removeClass("active");var a=this.collection.rest(this.collection.offset).map(function(a){var b=new d({model:a});return b.render().el});this.$result.append($(a).hide().fadeIn(300)),$(a[0]).addClass("pageborder"),this.$loadmore.toggle(this.collection.hasMore())},f.prototype.loadMore=function(a){a.preventDefault(),this.$loadmore.addClass("active"),this.collection.fetch({add:!0,data:_.extend(this.getUrlParameters(),{o:this.collection.length})})},f.prototype.getUrlParameters=function(){return{q:this.query,l:this.perPage}},f.prototype.search=function(a,b){this.query=a||"",this.perPage=b,this.offset=0,this.collection.fetch({data:this.getUrlParameters()})},f.prototype.single=function(a){(new e).fetch({url:"/packages/"+a+"/",success:$.proxy(function(a){var b=new d({model:a});$(b.render().el).appendTo(this.$result.empty()).addClass("selected").triggerHandler("click")},this)})}}),define("views/view.main",["require","exports","module","views/view.list"],function(a,b,c){var d=a("views/view.list").ListView,e=null,f=b.MainView=Backbone.View.extend({el:"#main",$searchInput:$("#search",this.el),events:{"keyup #search":"handleInput"},initialize:function(){return this.listView=new d({collection:this.collection}),this.collection.bind("fetching",this.onLoading,this),this.collection.bind("fetched",this.onLoaded,this),this.query=this.$searchInput.val(),this}});f.prototype.onLoading=function(){this.$searchInput.addClass("active")},f.prototype.onLoaded=function(){this.$searchInput.removeClass("active")},f.prototype.handleInput=function(a){var b=this.$searchInput.val();a.keyCode===13&&(window.clearTimeout(e),window.location.hash="#!/search/"+b)},f.prototype.setDocTitle=function(){var a=window.document.title;a=a.split(":").slice(0,1),this.query.length>0&&a.push("'"+this.query+"'"),window.document.title=a.join(": ")},f.prototype.search=function(a,b){this.query=a||"",this.$searchInput.val(this.query).focus(),this.setDocTitle(),this.listView.search(this.query,20)},f.prototype.single=function(a){this.query=a||"",this.$searchInput.val("").blur(),this.setDocTitle(),this.listView.single(a)}}),define("collections/collection.packages",["require","exports","module","models/model.package"],function(a,b,c){var d=a("models/model.package").Package,e=b.Packages=Backbone.Collection.extend({url:"/search",model:d,initialize:function(){this.total=0,this.offset=0}});e.prototype.fetch=function(a){typeof a!="undefined"||(a={}),this.trigger("fetching"),a=a||{};var b=a.success;return a.success=function(a,c){a.trigger("fetched"),b&&b(a,c)},Backbone.Collection.prototype.fetch.call(this,a)},e.prototype.hasMore=function(){return this.total>this.length},e.prototype.reset=function(a,b){return this.total=a.length,this.offset=0,Backbone.Collection.prototype.reset.apply(this,arguments)},e.prototype.parse=function(a){return this.total=a.total,this.offset=a.offset,this.perPage=a.length,_.map(a.hits,function(a){return d.prototype.parse.call(null,a)})}}),define("app",["require","exports","module","views/view.main","collections/collection.packages"],function(a,b,c){var d=a("views/view.main").MainView,e=a("collections/collection.packages").Packages,f=b.App=Backbone.Router.extend({routes:{"!/packages/:name":"single","!/search/*q":"search","":"index"},init:function(a){return this.mainView=(new d({collection:new e})).render(),Backbone.history.start(),this}});f.prototype.index=function(){this.mainView.search()},f.prototype.search=function(a){this.mainView.search(a)},f.prototype.single=function(a){this.mainView.single(a)}}),require.config({baseUrl:"js/"}),define("init",["require","exports","module","lib/domReady","app"],function(a,b,c){var d=a("lib/domReady"),e=a("app").App;d(function(){window.app=(new e).init()})})